!function(){var extractProps=function(e){for(var t,n,r={},o=e,i=arguments.length;o<i;++o)if("object"==typeof(t=arguments[o])&&null!==t)for(var a=0,f=(n=Object.keys(t)).length;a<f;++a)r[n[a]]=!0;return r},copyEnabled=function(e){return null!=e&&"object"==typeof e&&"function"==typeof e.constructor&&!e.nodeType},mergeObjects=function(o,i,e,t){if(!o&&"all"===i&&"function"==typeof Object.assign){for(;null==t[e];++e);return Object.assign.apply(Object,0==e?t:Array.prototype.slice.call(t,e))}for(var n=t[e],r=t.length,a=function(e,t){if(null!=t)if(null!=e){for(var n in t)if(e[n]!==t[n]&&("all"===i||e[n]===undefined^"old"===i))if(!o||"object"!=typeof t[n]||t[n]instanceof RegExp||!t.hasOwnProperty(n)||!copyEnabled(t[n]))e[n]=t[n];else try{null==e[n]&&(e[n]=asSys.mimic(t[n])),a(e[n],t[n])}catch(r){e[n]=t[n]}}else e=t};++e<r;)a(n,t[e]);return n},twinScan=function(e,t,n){for(var r,o,i=t,a=e.length;i<a;++i)for(r=e[i],o=i+1;o<a;++o)if(!1===n(r,e[o]))return!1;return!0},asSys=function(){for(var e,t,n=[],r=null,o=Array.prototype.slice.call(arguments,0),i=function(){var t=this,n=arguments;t.__initializing||(t.__initializing=!0,asSys.each(t.__skills,function(e){e.apply(t,n)}),delete t.__initializing)},a=0;a<o.length;++a){if(null==(t=o[a]))throw{name:"Missing skill",message:"The skill-set liseted ["+t+"] is missing.",skill:f};if("function"==typeof t&&t.prototype!==undefined){if(-1<n.indexOf(t))continue;if(null!=t.prototype.__depends){e=[a,0];for(var f,l=0,s=t.prototype.__depends.length;l<s;++l)f=t.prototype.__depends[l],-1==o.indexOf(f)&&e.push(f);if(2<e.length){Array.prototype.splice.apply(o,e),--a;continue}}if(null!=t.prototype.__expects){null==r&&(r={});for(l=0,s=t.prototype.__expects.length;l<s;++l)r[t.prototype.__expects[l]]=!0}if(n.push(t),i.prototype===undefined?i.prototype=Object.create(t.prototype):mergeObjects(!0,"all",0,[i.prototype,t.prototype]),t.prototype.__skills!==undefined){l=0;for(var p,u=t.prototype.__skills.length;l<u;++l)p=t.prototype.__skills[l],-1==n.indexOf(p)&&n.push(p)}}}return asSys.each(r,function(e,t){if(null==i.prototype[t])throw{name:"Unmatched expectation",message:"The expected method ["+t+"] was not found among provided skills.",method:t}}),Object.defineProperties(i.prototype,{__skills:{enumerable:!1,writable:!1,value:n}}),i};asSys.version="0.13.3",asSys.equal=function(e){var o=e,t=0,i=function(e,t,n){if("object"!=typeof e||"object"!=typeof t)return e===t;if(!1!==n){for(var r in extractProps(0,e,t))if(!i(e[r],t[r],o))return!1;return!0}};return"boolean"!=typeof o?o=!1:t=1,twinScan(arguments,t,i)},asSys.similar=function(e){var o=e,t=0;return match=function(e,t,n){if(e instanceof RegExp)return"string"==typeof t&&null!=t.match(e);if(t instanceof RegExp)return"string"==typeof e&&null!=e.match(t);if("object"!=typeof e||"object"!=typeof t)return e==t;if(!1!==n){for(var r in e)if(t[r]!==undefined&&!match(e[r],t[r],o))return!1;return!0}},"boolean"!=typeof o?o=!1:t=1,twinScan(arguments,t,match)},asSys.common=function(e){var i=e,t=0,a=null,n=arguments.length,r=function(e,t){if(Array.isArray(e)&&Array.isArray(t)){null==a&&(a=[]);for(var n=0,r=e.length;n<r;++n)-1<t.indexOf(e[n])&&a.push(e[n])}else for(var o in null==a&&(a={}),e)t[o]===undefined||i&&e[o]!=t[o]||(a[o]=e[o])};for("boolean"!=typeof e?i=!1:t=1;++t<n;)r(null==a?arguments[t-1]:a,arguments[t]);return a},asSys.extend=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"all",n,arguments)},asSys.mixin=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"new",n,arguments)},asSys.update=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"old",n,arguments)},asSys.filter=function(e,t){if("function"==typeof e.filter)return e.filter(t);for(var n,r=asSys.mimic(e),o=Object.keys(e),i=0,a=o.length;i<a;++i)t(e[n=o[i]],n,e)&&(r[n]=e[n]);return r},asSys.each=function(e,t){if(null!=e)if("function"==typeof e.forEach)e.forEach(t);else if("object"!=typeof e)t(e);else for(var n,r=Object.keys(e),o=0,i=r.length;o<i;++o)t(e[n=r[o]],n,e)},asSys.findIndex=function(e,t){if("function"!=typeof t)return e.indexOf(t);if("function"==typeof e.findIndex)return e.findIndex(t);for(var n=0,r=e.length;n<r.length;++n)if(t.call(e[n],e[n],n))return n;return-1},asSys.weight=function(e){return"object"!=typeof e?1:e.hasOwnProperty("length")&&"number"==typeof e.length?e.length:Object.keys(e).length},asSys.name=function(e){if("function"!=typeof e)return skill.toString();if(e.name!==undefined)return e.name;var t=e.toString().match(/function ([^\(]+)/);return null!=t?t[1]:""},asSys.mimic=function(e){if(copyEnabled(e)){var t=Object.create(Object.getPrototypeOf(e));try{return e.constructor.apply(t,Array.prototype.slice(arguments,1))||t}catch(n){}}},asSys.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},asSys.path=function(agent,path,value){if(null!=path){if(!Array.isArray(path))try{var pref=("["!=path[0]?"agent.":"agent")+path;return value===undefined?eval("value = "+pref):eval(pref+" = value"),value}catch(e){path=path.split(".")}for(var i=0,pl=path.length;i<pl-1;++i)agent=agent[path[i]]=agent[path[i]]||{};return value!==undefined?agent[path[i]]=value:value=agent[path[i]],value}},asSys.act=function(e,t){if(null!=e)return"string"==typeof t&&(t=e[t]),"function"==typeof t?t.apply(e,Array.prototype.slice.call(arguments,2)):void 0},asSys.broadcast=function(t,n){var r=Array.prototype.slice.call(arguments,2);return asSys.each(t.__skills,function(e){"function"==typeof e.prototype[n]&&e.prototype[n].apply(t,r)}),t},asSys.pass=function(e,t,n){var r,o=e.__skills&&e.__skills.indexOf(t);if(-1<o)for(;0<=--o;)if("function"==typeof(r=e.__skills[o]).prototype[n])return r.prototype[n].apply(e,Array.prototype.slice.call(arguments,3))},asSys.can=function(e,t){return"object"==typeof e&&null!=e[t]&&"function"==typeof e[t]},asSys.aware=function(e,t){return"object"==typeof e&&e[t]!==undefined},asSys.capable=function(e,t){var n,r,o=t,i=Object.getPrototypeOf(e),a=1;"boolean"!=typeof o?o=!0:a=2;for(var f=0,l=a,s=arguments.length;a<s;++a)(e instanceof(n=arguments[a])||0<(r=asSys.weight(n.prototype))&&asSys.weight(asSys.common(!0,i,n.prototype))==r)&&++f;return 0<f&&(!o||arguments.length-l==f)},asSys.group=function(e,t,n){"boolean"!=typeof t&&(n=t,t=!1);var r=this.mimic(e),o={};for(var i in e){var a=e[i];n.call(a,a,i,e)&&(t&&mergeObjects(!1,"all",0,[o,Object.getPrototypeOf(a)]),r.push(a))}if(t){for(var f,l=Object.keys(o),s={},p=0,u=l.length;p<u;++p)s[f=l[p]]={enumerable:!1,writable:!1,value:"function"!=typeof o[f]?o[f]:function(r){return function(){var e=undefined;for(var t in this){var n=this[t];"function"==typeof n[r]&&(e=n[r].apply(n,arguments))}return e}}(f)};Object.defineProperties(r,s)}return r},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=asSys:"function"==typeof define&&define.amd?(define(asSys),this.asSys=asSys):this.asSys=this.a$=asSys}();