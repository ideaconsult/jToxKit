<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>ToxMatrix development page</title>
  <link rel="stylesheet" href="../tests/base.css" />
  <link rel="stylesheet" href="../tests/skeleton-fluid.css" />
  <link rel="stylesheet" href="../tests/layout.css" />
  <link rel="stylesheet" href="../tests/jquery-ui.css" />
  <link rel="stylesheet" href="../tests/jquery.dataTable.css" />
  <link rel="stylesheet" href="../tests/jBox.css" />
  <link rel="stylesheet" href="../tests/ambit2.css" />

  <link rel="stylesheet" href="../www/jtoxkit.css" />
  <link rel="stylesheet" href="../www/ketcher.css" />
  <link rel="stylesheet" href="jquery.tokenize.css" />
  <link rel="stylesheet" href="ui-matrix.css" />

  <script src="oecdcategories.js"></script>
  <script src="i5enums.js"></script>

  <script src="../tests/jquery.js"></script>
  <script src="../tests/jquery-migrate-1.2.1.min.js"></script>
  <script src="../tests/jquery-ui.min.js"></script>
  <script src="../tests/jquery.dataTable-1.9.4.min.js"></script>
  <script src="../tests/jBox.js"></script>

  <script src="es6-shim.js"></script>

  <script src="../www/jtoxkit.js"></script>
  <script src="../www/ketcher.js"></script>
  <script src="jquery.tokenize.js"></script>
  <script src="ui-matrix.js"></script>
  <script src="config-matrix.js"></script>
  <script src="config-study.js"></script>
  <!-- ?bundleUri=https%3A%2F%2Fapps.ideaconsult.net%2Fdata%2Fbundle%2F36# -->
</head>

<body>
  <div class="jtox-template"> 
<!--[[ jT.ui.templates['all-matrix'] -->
    <div class="jtox-matrix-kit">
      <ul>
        <li><a href="#jtox-identifiers">Assessment identifier</a></li>
        <li><a class="jtox-summary-entry" data-summary="compound" href="#jtox-structures">Collect structures</a></li>
        <li><a class="jtox-summary-entry" data-summary="substance" href="#jtox-substances">Select substances</a></li>
        <li><a class="jtox-summary-entry" data-summary="property" href="#jtox-endpoints">Select endpoints</a></li>
        <li><a class="jtox-summary-entry" data-summary="matrix" href="#jtox-matrix">Assessment details</a></li>
        <li><a href="#jtox-report">Report</a></li>
      </ul>
      <div id="jtox-identifiers" data-loader="onIdentifiers">
        <form>
          <table class="dataTable">
            <thead>
              <tr class="label-box">
                <th class="right size-third"><label for="title">Title</label>*<a href='#' class='chelp a_name'>?</a>:</th>
                <td><input class="first-time" value="{{title}}" name="title" id="title" required /></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="maintainer">Maintainer</label>*<a href='#' class='chelp a_maintainer'>?</a>:</th>
                <td><input class="first-time" value="{{maintainer}}" name="maintainer" id="maintainer" required /></td>
              </tr>
              <tr class="label-box">
                <th class="right top size-third"><label for="description">Purpose</label>*<a href='#' class='chelp a_description'>?</a>:</th>
                <td><textarea class="nomargin " name="description" id="description" required>{{description}}</textarea></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third">Version <a href='#' class='chelp a_version'>?</a>:</th>
                <td>{{version}}</td>
              </tr>
              <tr class="label-box">
                <th class="right size-third">Version start date <a href='#' class='chelp a_version_date'>?</a>:</th>
                <td>{{created|formatDate}}</td>
              </tr>
              <tr class="label-box">
                <th class="right size-third">Version last modified on <a href='#' class='chelp a_version_date'>?</a>:</th>
                <td>{{updated|formatDate}}</td>
              </tr>
              <tr class="label-box">
                <th class="right size-third">Status<a href='#' class='chelp a_published'>?</a>:</th>
                <td>{{status|formatStatus}}</td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="license">License</label>*:</th>
                <td><input class="first-time" value="{{rights.URI}}" name="license" id="license" required /></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="rightsHolder">Rights holder</label>*<a href='#' class='chelp a_rightsholder'>?</a>:</th>
                <td><input class="first-time" value="{{rightsHolder}}" name="rightsHolder" id="rightsHolder" required /></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="seeAlso">See also</label>*<a href='#' class='chelp a_code'>?</a>:</th>
                <td><input class="first-time" value="{{seeAlso}}" name="seeAlso" id="seeAlso" required /></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="source">Source URL</label>*<a href='#' class='chelp a_doclink'>?</a>:</th>
                <td>
                  <input class="first-time" value="{{source}}" name="source" id="source" required />
                  <a href="" id="source-link" target="_blank" class="fa fa-action fa-external-link">open link</a>
                </td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="number">Identifier</label><a href='#' class='chelp assessment'>?</a>:</th>
                <td>{{number}}</td>
              </tr>
              <tr class="label-box">
                <th class="right size-third"><label for="stars">Rating</label> <a href='#' class='chelp a_rating'>?</a>:</th>
                <td class="data-stars-field"><input type="hidden" name="stars" value="0" /></td>
              </tr>
              <tr class="label-box">
                <th class="right size-third top"><label for="users-write">Users with write access</label><a href='#' class='chelp bundle_rw'>?</a>:</th>
                <td class="jtox-user-rights">
                  <input name="users-write" id="users-write" class="jtox-users-select ignore-auto" data-permission="canWrite" />
                </td>
              </tr>
              <tr class="label-box">
                <th class="right size-third top"><label for="users-read">Users with read access</label><a href='#' class='chelp bundle_rw'>?</a>:</th>
                <td class="jtox-user-rights">
                  <input name="users-read" id="users-read" class="jtox-users-select ignore-auto" data-permission="canRead" />
                </td>
              </tr>
            </thead>
          </table>
          <div class="actions">
            <button name="assStart" type="submit" data-subject="bundle-start">Start</button>
            <button name="assFinalize" type="button" data-subject="bundle-finalize">Finalize Assessment</button>
            <button name="assNewVersion" type="button" data-subject="bundle-version">Generate new version</button>
          </div>
        </form>
      </div>
      <div id="jtox-structures" data-loader="onStructures">
        <div id="struct-query" class="jtox-kit" 
          data-kit="Query" 
          data-initial-query="false" 
          data-hide-options="uri,context">
        </div>
        <div id="struct-browser" class="jtox-kit" 
          data-kit="Compound" 
          data-show-tabs="false" 
          data-hide-empty="true"
          data-details-height="500px" 
          data-show-diagrams="true">
        </div>
      </div>
      <div id="jtox-substances" data-loader="onSubstances">
        <div class="jtox-inline tab-substance">
          <div class="float-right">
            <button type="button" class="details-expand-all jtox-handler" data-handler="expandAll">Expand all</button>
            <button type="button" class="details-collapse-all jtox-handler" data-handler="collapseAll">Collapse all</button>
          </div>
        </div>
        <div id="substance-selector" class="jtox-kit" 
          data-kit="Compound" 
          data-show-tabs="false"
          data-hide-empty="true"
          data-show-diagrams="true">
        </div>
      </div>
      <div id="jtox-endpoints" data-loader="onEndpoints">
        <div class="jq-buttonset center auto-setup">
          <input type="radio" id="erelevant" name="eaction" checked="true" class="jtox-handler" data-handler="endpointMode"><label for="erelevant">Relevant endpoints</label></input>
          <input type="radio" id="eall" name="eaction" class="jtox-handler" data-handler="endpointMode"><label for="eall">All endpoints</label></input>
        </div>
        <div id="endpoint-selector" class="jtox-kit" 
          data-kit="Endpoint"
          data-hide-filter="false">
        </div>
      </div>
      <div id="jtox-matrix" data-loader="onMatrix">
        <div class="jq-buttonset center auto-setup">
          <input type="radio" id="xinitial" name="xaction" class="jtox-handler" data-handler="matrixMode" checked="true"><label for="xinitial">Initial matrix</label></input>
          <input type="radio" id="xworking" name="xaction" class="jtox-handler" data-handler="matrixMode"><label for="xworking">Working matrix</label></input>
          <input type="radio" id="xfinal" name="xaction" class="jtox-handler" data-handler="matrixMode"><label for="xfinal">Final matrix</label></input>
        </div>
        <button class="create-button jtox-handler" data-handler="createWorkingCopy" data-subject="matrix">Create working copy</button>
        <div id="matrix-table" class="jtox-kit" 
          data-kit="Compound"
          data-show-diagrams="true"
          data-show-units="false"
          data-tabs-folded="true"
          data-hide-empty="true"
          data-remember-checks="true"
          data-fixed-width="650px">
        </div>
      </div>
      <div id="jtox-report" class="jtox-report" data-loader="onReport">
        <div class="report-box"></div>
      </div>
    </div>
<!-- // end of all-matrix ]]-->
<!--[[ jT.ui.templates['matrix-tag-buttons'] -->
  <div class="{{ tag }}">
    <button class="jt-toggle jtox-handler target" data-subject="{{subject}}-tag" data-handler="{{subject}}Tag" data-tag="target" title="Select the {{subject}} as Target">T</button><br/>
    <button class="jt-toggle jtox-handler source" data-subject="{{subject}}-tag" data-handler="{{subject}}Tag" data-tag="source" title="Select the {{subject}} as Source">S</button><br/>
    <button class="jt-toggle jtox-handler cm" data-subject="{{subject}}-tag" data-handler="{{subject}}Tag" data-tag="cm" title="Select the {{subject}} as Category Member">CM</button><br/>
  </div>
<!-- // end of matrix-tag-buttons ]]-->
<!--[[ jT.ui.templates['matrix-tag-indicator'] -->
<button class="jt-toggle {{tag}} active" data-tag="{{tag}}" title="This {{subject}} is selected as {{name}}">{{code}}</button>
<!-- // end of matrix-tag-indicator ]]-->
<!--[[ jT.ui.templates['matrix-sel-arrow'] -->
<i class="jtox-{{direction}} fa fa-arrow-{{direction}} jtox-handler" data-handler="substanceMove" data-direction="{{direction}}" title="Move the {{subject}} up in the list"></i>
<!-- // end of matrix-sel-arrow ]]-->
<!--[[ jT.ui.templates['matrix-full-report'] -->
<p><a href="#" class="jtox-handler" data-handler="reportWord">Download Word file with the report</a></p>
<div id="jtox-report-cover">
  <h1>Ambit Assessment Report</h1>
  <h2>{{ title }}</h2>
  <dl>
    <dt>Author:</dt><dd>{{ maintainer }}</dd>
    <dt>Date:</dt><dd>{{ created|formatDate }}</dd>
    <dt>Assessment code:</dt><dd>{{ number }}</dd>
    <dt>Purpose:</dt><dd>{{ description }}</dd>
  </dl>
</div>

<section id="jtox-report-identifiers">
  <h2>Assessment Identifiers</h2>

  <table class="dataTable">
    <thead>
      <tr><th class="right size-third">Assessment title:</th><td>{{ title }}</td></tr>
      <tr><th class="right size-third">Owner:</th><td>{{ maintainer }}</td></tr>

      <tr><th class="right top size-third">Purpose:</th><td>{{ description }}</td></tr>
      <tr><th class="right size-third">Version:</th><td>{{ version }}</td></tr>
      <tr><th class="right size-third">Status:</th><td>{{ status|formatStatus }}</td></tr>
      <tr><th class="right size-third">Version start date:</th><td>{{ created|formatDate }}</td></tr>
      <tr><th class="right size-third">Version last modified on:</th><td>{{ updated|formatDate }}</td></tr>
      <tr><th class="right size-third">Published:</th><td>{{ published|formatDate }}</td></tr>
      <tr><th class="right size-third">Assessment code:</th><td>{{ seeAlso }}</td></tr>
      <tr><th class="right size-third">Assessment DocLink:</th><td>{{ source|formatLink }}</td></tr>
      <tr><th class="right size-third">Assessment ID:</th><td>{{ number }}</td></tr>
    </thead>
  </table>

  <p>The original assessment in Ambit can be found via <a href="{{baseUrl}}ui/assessment?bundle_uri={{bundleUri}}">Assessment ID</a></p>

</section>

<section id="jtox-report-structlist">
  <h2>List of structures for assessment</h2>
  <p>In the assessment, similar structures were selected from exact structure, substructure and/or similarity searches, or were added manually. The rationale for the selection is given in the table.</p>
  <div class="jtox-ds-variable dataTables_wrapper dt-jqueryui no-footer">
    <table class="table-box dataTable">{{ dataTables.structure }}</table>
  </div>
</section>

<section id="jtox-report-substances">
  <h2>List of substances related to the structures</h2>
  <p>In the following, for each structure listed in chapter 2, substances were selected and the rationale is given.</p>
  <div class="jtox-ds-variable dataTables_wrapper dt-jqueryui no-footer">
    <table class="table-box dataTable">{{ dataTables.substance }}</table>
  </div>
</section>

<section id="jtox-report-matrix">
  <h2>Substance composition matrix</h2>
  <p>In the following, for each substance, the associated structure(s) and the composition are given.</p>
  <div class="jtox-ds-variable dataTables_wrapper dt-jqueryui no-footer">
    <table class="table-box dataTable">{{ dataTables.composition }}</table>
  </div>
</section>

<section id="jtox-report-final">
  <h2>Assessment data matrix</h2>
  <p>In the following, for each substance, the associated endpoint data are given, either experimental data, waiving or read-across.</p>
  <p>For detailed data or rationale for waiving and read-across, click hyperlinks in the table. These data or rationales can also be found in the annex of the report.</p>
  <div class="jtox-ds-variable">
    <table class="table-box dataTable">{{ dataTables.matrix }}</table>
  </div>
</section>

<section id="jtox-report-justification">
  <h2>Justification for read-across / category</h2>
  <div>
    <textarea id="report-justification" name="report-justification">{{ reportJustification }}</textarea>
  </div>
</section>

<section class="annex" id="jtox-report-experimental-data">
  <h2>Experimental data</h2>
  <p><a href="{{bundleUri}}/substance?media=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="export-substance">Create Excel file with all used experimental data</a></p>
</section>

<section class="annex" id="jtox-report-gap-filling">
  <h2>Rationale for gap filling</h2>
  <!-- <table class="table-box"></div>table> -->
</section>

<section class="annex" id="jtox-report-deleting-data">
  <h2>Rationale for deleting experimental data</h2>
  <!-- <table class="table-box"></div>table> -->
</section>

<section class="annex" id="jtox-report-initial-matrix">
  <h2>Initial matrix</h2>
  <p><a href="{{bundleUri}}/dataset?media=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="export-initial-matrix">Create Excel file with the initial matrix</a></p>
</section>

<section class="annex" id="jtox-report-working-matrix">
  <h2>Working matrix</h2>
  <p><a href="{{bundleUri}}/matrix?media=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" id="export-working-matrix">Create Excel file with the working matrix</a></p>
</section>
<p><a href="#" class="jtox-handler" data-handler="reportWord">Download Word file with the report</a></p>
<!-- // end of matrix-full-report ]]-->
  </div>
</body>

</html>