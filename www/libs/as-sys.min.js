!function(){var extractProps=function(e){for(var t,n,r={},o=e,i=arguments.length;o<i;++o)if("object"==typeof(t=arguments[o])&&null!==t)for(var a=0,f=(n=Object.keys(t)).length;a<f;++a)r[n[a]]=!0;return r},copyEnabled=function(e){return null!=e&&"object"==typeof e&&"function"==typeof e.constructor&&!e.nodeType},mergeObjects=function(e,t,n,r){if(!e&&"all"===t&&"function"==typeof Object.assign){for(;null==r[n];++n);return Object.assign.apply(Object,0==n?r:Array.prototype.slice.call(r,n))}for(var o=r[n],i=r.length,a=function(n,r){if(null!=r)if(null!=n){for(var o in r)if(n[o]!==r[o]&&("all"===t||n[o]===undefined^"old"===t))if(!e||"object"!=typeof r[o]||r[o]instanceof RegExp||!r.hasOwnProperty(o)||!copyEnabled(r[o]))n[o]=r[o];else try{null==n[o]&&(n[o]=asSys.mimic(r[o])),a(n[o],r[o])}catch(i){n[o]=r[o]}}else n=r};++n<i;)a(o,r[n]);return o},twinScan=function(e,t,n){for(var r,o,i=t,a=e.length;i<a;++i)for(r=e[i],o=i+1;o<a;++o)if(!1===n(r,e[o]))return!1;return!0},asSys=function(){for(var e,t,n=[],r=null,o=Array.prototype.slice.call(arguments,0),i=function(){var e=this,t=arguments;e.__initializing||(e.__initializing=!0,asSys.each(e.__skills,function(n){n.apply(e,t)}),delete e.__initializing)},a=0;a<o.length;++a){if(null==(t=o[a]))throw{name:"Missing skill",message:"The skill-set liseted ["+t+"] is missing.",skill:f};if("function"==typeof t&&t.prototype!==undefined){if(n.indexOf(t)>-1)continue;if(null!=t.prototype.__depends){e=[a,0];for(var f,l=0,s=t.prototype.__depends.length;l<s;++l)f=t.prototype.__depends[l],-1==o.indexOf(f)&&e.push(f);if(e.length>2){Array.prototype.splice.apply(o,e),--a;continue}}if(null!=t.prototype.__expects){null==r&&(r={});for(var l=0,s=t.prototype.__expects.length;l<s;++l)r[t.prototype.__expects[l]]=!0}if(n.push(t),i.prototype===undefined?i.prototype=Object.create(t.prototype):mergeObjects(!0,"all",0,[i.prototype,t.prototype]),t.prototype.__skills!==undefined)for(var p,l=0,u=t.prototype.__skills.length;l<u;++l)p=t.prototype.__skills[l],-1==n.indexOf(p)&&n.push(p)}}return asSys.each(r,function(e,t){if(null==i.prototype[t])throw{name:"Unmatched expectation",message:"The expected method ["+t+"] was not found among provided skills.",method:t}}),Object.defineProperties(i.prototype,{__skills:{enumerable:!1,writable:!1,value:n}}),i};asSys.version="0.13.3",asSys.equal=function(e){var t=e,n=0,r=function(e,n,o){if("object"!=typeof e||"object"!=typeof n)return e===n;if(!1!==o){for(var i in extractProps(0,e,n))if(!r(e[i],n[i],t))return!1;return!0}};return"boolean"!=typeof t?t=!1:n=1,twinScan(arguments,n,r)},asSys.similar=function(e){var t=e,n=0;return match=function(e,n,r){if(e instanceof RegExp)return"string"==typeof n&&null!=n.match(e);if(n instanceof RegExp)return"string"==typeof e&&null!=e.match(n);if("object"!=typeof e||"object"!=typeof n)return e==n;if(!1!==r){for(var o in e)if(n[o]!==undefined&&!match(e[o],n[o],t))return!1;return!0}},"boolean"!=typeof t?t=!1:n=1,twinScan(arguments,n,match)},asSys.common=function(e){var t=e,n=0,r=null,o=arguments.length;for("boolean"!=typeof e?t=!1:n=1;++n<o;)!function(e,n){if(Array.isArray(e)&&Array.isArray(n)){null==r&&(r=[]);for(var o=0,i=e.length;o<i;++o)n.indexOf(e[o])>-1&&r.push(e[o])}else{null==r&&(r={});for(var a in e)n[a]===undefined||t&&e[a]!=n[a]||(r[a]=e[a])}}(null==r?arguments[n-1]:r,arguments[n]);return r},asSys.extend=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"all",n,arguments)},asSys.mixin=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"new",n,arguments)},asSys.update=function(e){var t=e,n=0;return"boolean"!=typeof t?t=!1:n=1,mergeObjects(t,"old",n,arguments)},asSys.filter=function(e,t){if("function"==typeof e.filter)return e.filter(t);for(var n,r=asSys.mimic(e),o=Object.keys(e),i=0,a=o.length;i<a;++i)t(e[n=o[i]],n,e)&&(r[n]=e[n]);return r},asSys.each=function(e,t){if(null==e);else if("function"==typeof e.forEach)e.forEach(t);else if("object"!=typeof e)t(e);else for(var n,r=Object.keys(e),o=0,i=r.length;o<i;++o)t(e[n=r[o]],n,e)},asSys.findIndex=function(e,t){if("function"!=typeof t)return e.indexOf(t);if("function"==typeof e.findIndex)return e.findIndex(t);for(var n=0,r=e.length;n<r.length;++n)if(t.call(e[n],e[n],n))return n;return-1},asSys.weight=function(e){return"object"!=typeof e?1:e.hasOwnProperty("length")&&"number"==typeof e.length?e.length:Object.keys(e).length},asSys.name=function(e){if("function"!=typeof e)return skill.toString();if(e.name!==undefined)return e.name;var t=e.toString().match(/function ([^\(]+)/);return null!=t?t[1]:""},asSys.mimic=function(e){if(copyEnabled(e)){var t=Object.create(Object.getPrototypeOf(e));try{return e.constructor.apply(t,Array.prototype.slice(arguments,1))||t}catch(n){}}},asSys.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},asSys.path=function(agent,path,value){if(null!=path){if(!Array.isArray(path))try{var pref=("["!=path[0]?"agent.":"agent")+path;return value===undefined?eval("value = "+pref):eval(pref+" = value"),value}catch(e){path=path.split(".")}for(var i=0,pl=path.length;i<pl-1;++i)agent=agent[path[i]]=agent[path[i]]||{};return value!==undefined?agent[path[i]]=value:value=agent[path[i]],value}},asSys.act=function(e,t){if(null!=e)return"string"==typeof t&&(t=e[t]),"function"==typeof t?t.apply(e,Array.prototype.slice.call(arguments,2)):void 0},asSys.broadcast=function(e,t){var n=Array.prototype.slice.call(arguments,2);return asSys.each(e.__skills,function(r){"function"==typeof r.prototype[t]&&r.prototype[t].apply(e,n)}),e},asSys.pass=function(e,t,n){var r,o=e.__skills&&e.__skills.indexOf(t);if(o>-1)for(;--o>=0;)if("function"==typeof(r=e.__skills[o]).prototype[n])return r.prototype[n].apply(e,Array.prototype.slice.call(arguments,3))},asSys.can=function(e,t){return"object"==typeof e&&null!=e[t]&&"function"==typeof e[t]},asSys.aware=function(e,t){return"object"==typeof e&&e[t]!==undefined},asSys.capable=function(e,t){var n,r,o=t,i=Object.getPrototypeOf(e),a=1;"boolean"!=typeof o?o=!0:a=2;for(var f=0,l=a,s=arguments.length;a<s;++a)e instanceof(n=arguments[a])?++f:(r=asSys.weight(n.prototype))>0&&asSys.weight(asSys.common(!0,i,n.prototype))==r&&++f;return f>0&&(!o||arguments.length-l==f)},asSys.group=function(e,t,n){"boolean"!=typeof t&&(n=t,t=!1);var r=this.mimic(e),o={};for(var i in e){var a=e[i];n.call(a,a,i,e)&&(t&&mergeObjects(!1,"all",0,[o,Object.getPrototypeOf(a)]),r.push(a))}if(t){for(var f,l=Object.keys(o),s={},p=0,u=l.length;p<u;++p)s[f=l[p]]={enumerable:!1,writable:!1,value:"function"!=typeof o[f]?o[f]:function(e){return function(){var t=undefined;for(var n in this){var r=this[n];"function"==typeof r[e]&&(t=r[e].apply(r,arguments))}return t}}(f)};Object.defineProperties(r,s)}return r},"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=asSys:"function"==typeof define&&define.amd?(define(asSys),this.asSys=asSys):this.asSys=this.a$=asSys}();